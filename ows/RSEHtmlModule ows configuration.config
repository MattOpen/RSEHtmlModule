{"Name":"RSEHtmlModule","ConfigurationID":"13997432-0996-599d-ce55-cf93df18fdb8","searchItems":[],"queryItems":[],"listItems":[],"messageItems":[{"Index":1,"Level":0,"Parameters":{"Value":"moDnnArticle \t\ndevelopement\tver 1.1.02\nstable \t\tVer 1.0.14\nauthor\t\tMattOpen\n\n08.10.2014\tRSEHtmlModule renamed \n06.10.2014\tsyntax error in script update headline\n01.10.2014\tcheck sql version and add script,\n\t\tupdate copy ModuleName script\n26.08.2014\tadd class moHtmlModule to outer div\n\t\tcheck if div headline exist before add new headlinetext (module crash if not exist)\n20.07.2014\tVer 1.0.9"},"ActionType":"Action-Comment","ChildActions":[]},{"Index":2,"Level":0,"Parameters":{"Name":"FocusDefaults","RenderType":"0","skipDebug":"false","includeSearch":"false","includeExport":"false","includeImport":"false"},"ActionType":"Action-Region","ChildActions":[{"Index":3,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"RenderList","Value":"0","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":4,"Level":0,"Parameters":{"Name":"QueryFocusID","Query":"execute [dbo].[RSEprocGetModuleSettings] @UserID='[|UserID,System]',@PortalID='[|PortalID,System]'","IsProcess":"false","Connection":"","CacheName":"","CacheTime":"","CacheShared":"false"},"ActionType":"Action-Execute","ChildActions":[]},{"Index":5,"Level":0,"Parameters":{"VariableType":"<QueryString>","VariableDataType":"Number","Formatters":"","QuerySource":"NoteID","QueryTarget":"NoteID","QueryTargetLeft":"","QueryTargetRight":"","QueryTargetEmpty":"0","EscapeListX":"0","Protected":"true","EscapeHTML":"true"},"ActionType":"Template-Variable","ChildActions":[]},{"Index":6,"Level":0,"Parameters":{"VariableType":"<Custom>","VariableDataType":"Any","Formatters":"","QuerySource":"[|externDB,QueryFocusID]","QueryTarget":"@FocusDB","QueryTargetLeft":"","QueryTargetRight":"","QueryTargetEmpty":"dbo.","EscapeListX":"0","Protected":"true","EscapeHTML":"true"},"ActionType":"Template-Variable","ChildActions":[]},{"Index":7,"Level":0,"Parameters":{"VariableType":"<Custom>","VariableDataType":"Number","Formatters":"","QuerySource":"{IIF, \"'[|FORMAT,\"Administrators;EditAdmin;\",{ISINROLE}]'='True'\",\"1\",\"0\"}","QueryTarget":"@SecAdmin","QueryTargetLeft":"'","QueryTargetRight":"'","QueryTargetEmpty":"0","EscapeListX":"0","Protected":"true","EscapeHTML":"true"},"ActionType":"Template-Variable","ChildActions":[]},{"Index":8,"Level":0,"Parameters":{"LeftCondition":"[@SecAdmin,Variable]","RightCondition":"'1'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-If","ChildActions":[{"Index":9,"Level":0,"Parameters":{"Type":"CONTROL.FOOTER","Name":"CKEDITOR load scripts","Value":"<script type=\"text/javascript\">\n$(document).ready(function () {\n  if(window.CKEDITOR && window.CKEDITOR.dom){\n\treturn;\n  }else{\n\t$(document.body).append('<script type=\"text/javascript\" src=\"/Providers/HtmlEditorProviders/CKEditor/ckeditor.js\" />');\n\t$(document.body).append('<script type=\"text/javascript\" src=\"/Providers/HtmlEditorProviders/CKEditor/js/jquery.ckeditor.adapter.js\" />');\n  }\n});\n</script>","SkipProcessing":"false","AssignmentType":"1"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":10,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"RunEditor","Value":"<script language='javascript' type='text/javascript'>\n// Initialisiere ckeditor\n$(function() {\n\t$('textarea.myckeditor').ckeditor({\n\t\tlanguage: '[FORMAT,[Locale,System],{LEFT:2}]'\n\t\t,customConfig: '/DesktopModules/RSE/RSEHtmlModule/js/ckeditor_config.js'\n\t\t,filebrowserBrowseUrl: '/Providers/HtmlEditorProviders/CKEditor/Browser/Browser.aspx?type=Images&tabid=[TabID,System]&PortalID=[PortalID,System]&mid=[ModuleID,System]&ckid=txtContent&mode=Default'\n\t});\n});\n</script>","SkipProcessing":"true","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]}]}]},{"Index":11,"Level":0,"Parameters":{"Name":"OnRender","RenderType":"0","skipDebug":"false","includeSearch":"false","includeExport":"false","includeImport":"false"},"ActionType":"Action-Region","ChildActions":[{"Index":12,"Level":0,"Parameters":{"LeftCondition":"'[template,Querystring]'","RightCondition":"'editarticleDEV'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-If","ChildActions":[{"Index":13,"Level":0,"Parameters":{"Name":"RSEdevAllModules","Region":"article3","ConfigurationID":"14013619-0422-7a18-8137-4b603dd99c2e"},"ActionType":"Action-Goto","ChildActions":[]}]},{"Index":14,"Level":0,"Parameters":{"LeftCondition":"'[template,Querystring]'","RightCondition":"'editarticle'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-ElseIf","ChildActions":[{"Index":15,"Level":0,"Parameters":{"Name":"defaultsAll","RenderType":"2","skipDebug":"false","includeSearch":"false","includeExport":"false","includeImport":"false"},"ActionType":"Action-Region","ChildActions":[{"Index":16,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"messageContainer","Value":"<div class=\"row\">\n    <div class=\"form-group col-md-12 col-xs-12\">\n\t<div id=\"messageContainer[ModuleID,System]\" class=\"messageContainer\">&nbsp;</div>\n    </div>\n</div>","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":17,"Level":0,"Parameters":{"LeftCondition":"'[menu,q]'","RightCondition":"'ext'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-If","ChildActions":[{"Index":18,"Level":0,"Parameters":{"Value":"ext wird genutzt, wenn Aufruf aus dem html Modul."},"ActionType":"Action-Comment","ChildActions":[]},{"Index":19,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"menuCancel","Value":"<div class=\"row popover-menu\">\n    <div class=\"form-group col-md-11 col-xs-11\">\n       <h2 lang=\"en\">[[template,q],QueryFocusID] - id: [DS_ID]</h2>\n    </div>\n    <div class=\"form-group col-md-1 col-xs-1\">\n      <button type=\"button\" class=\"btn-close-xxl right\" onclick=\"ows.Fetch('[ModuleID,System]',-1,'Action=render');\"><span class=\"glyphicon glyphicon-remove-circle\"></span></button>\n    </div>\n</div>\n","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":20,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"menudropdown","Value":"<div class=\"form-group col-md-6 col-xs-6 right\">\n\t<div class=\"input-group\">\n\t\t<div class=\"clearfix\">&nbsp;</div>\n\t\t<div class=\"input-group-btn\">\n\t\t\t<button type=\"button\" class=\"btn btn-default btn-sm dropdown-toggle\" data-toggle=\"dropdown\"><span class=\"glyphicon rotate glyphicon-th-list\"></span></button>\n\t\t\t<ul class=\"dropdown-menu pull-right\">\n\t\t\t\t<li><a onclick=\"closeckeditor();ows.Fetch('[ModuleID,System]',-1,'action=save&template=[template,querystring]','messageContainer[ModuleID,System]',function(){ows.Fetch('[ModuleID,System]',-1,'action=render');return false;});\"><span class=\"glyphicon glyphicon-save\"></span>save and close</a></li>\n\t\t\t\t<li><a lang=\"en\" onclick=\"ows.Fetch('[ModuleID,System]',-1,'action=render');\"><span class=\"glyphicon glyphicon-remove\"></span>close</a></li>\n\t\t\t\t<li role=\"presentation\" class=\"divider\"></li>\n\t\t\t\t<li><a lang=\"en\" onclick=\"ows.Fetch('[ModuleID,System]',-1,'Action=delete&template=[template,querystring]','templateTopPane[ModuleID,System]');removeEditBox('templateTopPane[ModuleID,System]');\">delete</a></li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</div>","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":21,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"menuCancelSave","Value":"<div class=\"form-group col-md-6 col-xs-6 right\">\n\t<div class=\"input-group\">\n\t\t<div class=\"clearfix\">&nbsp;</div>\n\t\t<div class=\"input-group-btn\">\n                \t<button type=\"button\" lang=\"en\" class=\"btn btn-default  btn-sm\" onclick=\"ows.Fetch('[ModuleID,System]',-1,'Action=render');\"><span class=\"glyphicon glyphicon-remove\"></span>cancel</button>\n\t\t\t<button type=\"button\" lang=\"en\" class=\"btn btn-primary btn-sm\" value=\"absenden\" language=\"javascript\"\n                            onclick=\"updateckeditor();ows.Fetch('[ModuleID,System]',-1,'action=save&template=[template,querystring]','headermessageContainer');\"><span class=\"glyphicon glyphicon-save\"></span>save</button>\n\t\t</div>\n\t</div>\n</div>","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]}]},{"Index":22,"Level":0,"Parameters":{},"ActionType":"Condition-Else","ChildActions":[{"Index":23,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"menuCancel","Value":"<div class=\"row popover-menu\">\n    <div class=\"form-group col-md-11 col-xs-11\">\n       <h2 lang=\"en\">[[template,q],QueryFocusID] - id: [DS_ID]</h2>\n    </div>\n    <div class=\"form-group col-md-1 col-xs-1\">\n      <button type=\"button\" class=\"btn-close-xxl right\" onclick=\"removeEditBox('templateTopPane[ModuleID,System]');\"><span class=\"glyphicon glyphicon-remove-circle\"></span></button>\n    </div>\n</div>\n","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":24,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"menudropdown","Value":"\t<div class=\"input-group\">\n\t\t<div class=\"clearfix\">&nbsp;</div>\n\t\t<div class=\"input-group-btn\">\n\t\t\t<button type=\"button\" class=\"btn btn-default btn-sm dropdown-toggle\" data-toggle=\"dropdown\"><span class=\"glyphicon rotate glyphicon-th-list\"></span></button>\n\t\t\t<ul class=\"dropdown-menu pull-right\">\n\t\t\t\t<li><a lang=\"en\" onclick=\"updateckeditor();ows.Fetch('[ModuleID,System]',-1,'action=save&template=[template,querystring]','headermessageContainer',function(){removeEditBox('templateTopPane[ModuleID,System]');});\"><span class=\"glyphicon glyphicon-save\"></span>save and close</a></li>\n\t\t\t\t<li><a lang=\"en\" onclick=\"removeEditBox('templateTopPane[ModuleID,System]');\"><span class=\"glyphicon glyphicon-remove\"></span>close</a></li>\n\t\t\t\t<li role=\"presentation\" class=\"divider\"></li>\n\t\t\t\t<li><a lang=\"en\" onclick=\"ows.Fetch('[ModuleID,System]',-1,'Action=delete&template=[template,querystring]','headermessageContainer');removeEditBox('templateTopPane[ModuleID,System]');\">delete</a></li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":25,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"menuCancelSave","Value":"<div class=\"form-group col-md-6 col-xs-6 right\">\n\t<div class=\"input-group\">\n\t\t<div class=\"clearfix\">&nbsp;</div>\n\t\t<div class=\"input-group-btn\">\n\t\t\t<button lang=\"en\"  type=\"button\" class=\"btn btn-default  btn-sm\" onclick=\"removeEditBox('templateTopPane[ModuleID,System]');\"><span class=\"glyphicon glyphicon-remove\"></span>cancel</button>\n\t\t\t<button lang=\"en\" type=\"button\" class=\"btn btn-primary btn-sm\" value=\"absenden\" language=\"javascript\"\n\t\t\t\t\tonclick=\"updateckeditor();ows.Fetch('[ModuleID,System]',-1,'action=save&template=[template,querystring]','headermessageContainer');\"><span class=\"glyphicon glyphicon-save\"></span>save</button>\n\t\t</div>\n\t</div>\n</div>","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]}]}]},{"Index":26,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"articletemplateedit","Value":"<div class=\"row\">\n    <div class=\"form-group col-md-6\">\n\t[LanguageDropdown,action]\n    </div>\n    <div class=\"form-group col-md-3 col-xs-3\">\n      \t<input  id=\"frmIsActive\"  name=\"frmIsActive\"  class=\"switch\" type=\"checkbox\" value=\"[IsActive]\" {IIF,\"'[isactive]'='1'\",\"checked\",\"\"} onClick=\"validateCheckBox();\" />\n\t<label lang=\"en\" for=\"frmIsActive\"><span>visibility</span></label>\n    </div>\n    <div class=\"form-group col-md-3 col-xs-3 right\">\n\t[menudropdown,action]\n    </div>\n</div>\n<div class=\"row\">\n    <div class=\"form-group col-md-12\">\n        <label lang=\"en\" class=\"control-label\" for=\"frmBaseName\">Name&nbsp;([language], ID: [DS_ID])</label>\n        <input type=\"text\" class=\"form-control\" id=\"frmBaseName\" name=\"frmBaseName\" placeholder=\"[[template,q],QueryFocusID] name\" value=\"[basename]\">\n    </div>\n    <div class=\"form-group col-md-12\">\n        <label lang=\"en\"  class=\"control-label\" for=\"frmBaseDescription\">Description</label>\n        <textarea class=\"form-control myckeditor\" rows=\"10\" id=\"frmBaseDescription\" name=\"frmBaseDescription\" placeholder=\"[[template,q],QueryFocusID] Description\" value=\"basedescription\">[basedescription]</textarea>\n    </div>\n    [menuCancelSave,action]\n</div>","SkipProcessing":"true","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":27,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"articletemplatelist","Value":"<tr id=\"row[ds_id]\">\n\t<td class=\"col-xs-1\">[rownumber]</td>\n\t<td class=\"hover_style col-xs-9\" onclick=\"ows.Fetch('[ModuleID,System]',-1,'Action=edit&template=[template,q]&noteid=[ds_id]','templateTopPane[ModuleID,System]');styleEditBox('templateTopPane[ModuleID,System]');goToByScroll2('templateTopPane[ModuleID,System]', 100);\"><span>[BaseName]&nbsp;([language] id:[DS_ID])</span></td>\n\t<td class=\"col-xs-2\">\n\t<div class=\"btn-group right\">\n\t<button lang=\"en\" type=\"button\" class=\"btn btn-default\" value=\"edit\" name=\"edit[ds_id]\" id=\"edit[ds_id]\" language=\"javascript\" onclick=\"ows.Fetch('[ModuleID,System]',-1,'Action=edit&template=[template,q]&noteid=[ds_id]','templateTopPane[ModuleID,System]');styleEditBox('templateTopPane[ModuleID,System]');goToByScroll2('templateTopPane[ModuleID,System]', 100);\">edit</button>\n\t</div>\n\t</td>\n</tr>","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":28,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"LanguageDropdown","Value":"\t\t<!--<label lang=\"en\" class=\"control-label\" for=\"frmLanguage[ModuleID,System]\">show translation:</label>-->\n\t\t<select name=\"frmLanguage[ModuleID,System]\" ID=\"frmLanguage[ModuleID,System]\" class=\"form-control\">\n\t\t{SUBQUERY,\n\t\t\tName=\"qryLanguage\",\n\t\t\tQuery=\"exec [externDB,QueryFocusID][RSEprocGetItemIDLanguage]  @ItemType=[template,q], @ItemID=[FocusArticleID,QueryFocusID]\",\n\t\t\tFormat=\"<option value='\\[entryid\\]' onclick=\\\"ows.Fetch('\\[ModuleID,System\\]',0,'Action=edit&template=\\[template,q\\]&noteid=[SourceID]&menu=\\[menu,q\\]','templateTopPane\\[ModuleID,System\\]');styleEditBox('templateTopPane\\[ModuleID,System\\]');\\\" >\\[Text\\]</option>\",\n\t\t\tSelectedFormat=\"<option value='\\[entryid\\]' selected='selected'>\\[Text\\]</option>\",\n\t\t\tSelectedField=\"EntryID\",\n\t\t\tSelectedItems=\"[language]\",\n\t\t\tUseCache=\"false\"}\n\t\t</select>\n\t\t<span lang=\"en\" class=\"help-block\">select display language.</span>","SkipProcessing":"true","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":29,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"NewLanguage","Value":"<div class=\"row\">\n    <div class=\"form-group col-md-8\">\n\t<label lang=\"en\" class=\"control-label\" for=\"frmNewLanguage[ModuleID,System]\">add new translation</label>\n\t<select name=\"frmNewLanguage[ModuleID,System]\" ID=\"frmNewLanguage[ModuleID,System]\" class=\"form-control\">\n\t<option lang=\"en\" value='0' selected=\"selected\">choose language...</option>\n\t{SUBQUERY,\n\t\tName=\"qryNewLanguage\",\n\t\tQuery=\"exec [externDB,QueryFocusID][RSEprocGetItemIDLanguage]  @ItemType=[template,q], @ItemID=[FocusArticleID,QueryFocusID], @NewType=newlanguage\",\n\t\tNoResultFormat=\"<p><span lang=\"en\" >no other language available</span></p>\",\n\t\tFormat=\"<option value='\\[NewEntryID\\]' onclick=\\\"ows.Fetch('\\[ModuleID,System\\]',-1,'Action=newtranslation&template=\\[template,q\\]&frmNewLanguage=\\[NewEntryID\\]','0', function()\\{ows.Fetch('[ModuleID,System]',-1,'Action=edit&template=\\[template,q\\]','templateTopPane\\[ModuleID,System\\]');\\});$('#templateTopPane\\[ModuleID,System\\]').addClass('editBoxStyle');goToByScroll2('templateTopPane\\[ModuleID,System\\]', 100);\\\" >\\[NewText\\]</option>\",\n\t\tSelectedFormat=\"<option value='\\[NewEntryID\\]' selected=\"selected\">\\[NewText\\]</option>\",\n\t\tSelectedField=\"NewEntryID\",\n\t\tUseCache=\"false\"}\n\t</select>\n\t<span lang=\"en\" class=\"help-block\">select language for the new translation.</span>\n    </div>\n</div>","SkipProcessing":"true","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":30,"Level":0,"Parameters":{"Name":"securityQuery","Query":"execute [dbo].[RSEprocSetModuleSettings] @UserID='[UserID,System]', @PortalID='[PortalID,System]', @SettingName='FocusArticleID', @SettingValue=[NoteID,variable]","IsProcess":"false","Connection":"","CacheName":"","CacheTime":"","CacheShared":"false"},"ActionType":"Action-Execute","ChildActions":[]},{"Index":31,"Level":0,"Parameters":{"Name":"RSEHtmlModule","Region":"FocusDefaults","ConfigurationID":"13997432-0996-599d-ce55-cf93df18fdb8"},"ActionType":"Action-Goto","ChildActions":[]},{"Index":32,"Level":0,"Parameters":{"LeftCondition":"'[Action,Querystring]'","RightCondition":"'delete'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-If","ChildActions":[{"Index":33,"Level":0,"Parameters":{"Name":"qryDELETE","Query":"BEGIN\ndeclare @systemmessage nvarchar(max)\nset @systemmessage = 'TEST'\ndeclare @focusid int\nset @focusid = ISNULL((select SettingValue as focusarticleid from RSEUserSettings \n\t\twhere CreatedByUserID = '[UserID,System]' and PortalID = '[PortalID,System]' and Settingname = N'focusarticleid'),'-1')\n\ndeclare @ParentID int\nset @ParentID = (select TOP 1 ParentID from [|@FocusDB,variable]RSEArticle where [DS_ID] = @focusid)\nif @ParentID = '-1' \n\tBEGIN\n\t\tset @systemmessage = 'parentid  -1'\n\t\tgoto endsave\n\tEND\n\ndeclare @childcount int\nif @ParentID = 0\nBEGIN\n\tset @childcount = (select count(DS_ID) from [|@FocusDB,variable]RSEArticle where [ParentID] = @focusid and userDeleted = 0 and sysDeleted = 0 )\n\tif @childcount > 0 \n\tBEGIN\n\t\tset @systemmessage = 'cannot delete, please delete translations first'\n\t\tgoto endsave\n\tEND\n\tELSE GOTO DS_UPDATE\nEND\n\nDS_UPDATE:\nBEGIN\n\tUPDATE [|@FocusDB,variable][RSEArticle]\n\t   SET \n\t\t  [changeDateTime] = GETDATE()\n\t\t  ,[ipaddress] = '[Request.UserHostAddress,system]'\n\t\t  ,[userDeleted] = '1'\n\t\t  ,[IsActive] = '0'\n\t\t  ,[PortalID] = '[PortalID,System]'\n\t\t  ,[LastUserID] = '[UserID,System]'\n\t WHERE [DS_ID] = @focusid\n\n\tdelete from [|@FocusDB,variable]RSEArticleToModule where ModuleID = '[ModuleID,System]' and PortalID = '[PortalID,System]'\n\tinsert into [|@FocusDB,variable]RSEArticleToModule \n\t\t(UserID, ArticleID, ModuleID,IPAddress, PortalID)\n\t\tvalues('[UserID,System]', @ParentID , '[ModuleID,System]','[Request.UserHostAddress,system]', '[PortalID,System]')\n\t\n\tset @systemmessage = 'record deleted!'\n\tselect @systemmessage as systemmessage, @focusid as focusid\n\texecute [dbo].[RSEprocSetModuleSettings] @UserID='[UserID,System]', @PortalID='[PortalID,System]', @SettingName='FocusArticleID', @SettingValue=@ParentID\ngoto endsave\nEND\nendsave:\nselect @systemmessage as systemmessage, '0' as focusid\nEND","IsProcess":"false","Connection":"","CacheName":"","CacheTime":"","CacheShared":"false"},"ActionType":"Action-Execute","ChildActions":[{"Index":34,"Level":0,"Parameters":{"Type":"Detail-NoQuery","GroupStatement":"","GroupIndex":"","Value":"<script language='javascript' type='text/javascript'>\n$(function() {\n\tmessagebox2('headermessageContainer','[systemmessage,qryDELETE]');\n\tif( $('#row[focusid,qryDELETE]').length ) {\n\t\tdocument.getElementById('row[focusid,qryDELETE]').remove();\n\t}\n    });\n</script>","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[]}]}]},{"Index":35,"Level":0,"Parameters":{"LeftCondition":"'[Action,Querystring]'","RightCondition":"'save'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-ElseIf","ChildActions":[{"Index":36,"Level":0,"Parameters":{"Name":"CompanyVariables","RenderType":"2","skipDebug":"false","includeSearch":"false","includeExport":"false","includeImport":"false"},"ActionType":"Action-Region","ChildActions":[{"Index":37,"Level":0,"Parameters":{"VariableType":"<Form>","QuerySource":"frmBaseDescription","QueryTarget":"@frmBaseDescription","QueryTargetLeft":"'","QueryTargetRight":"'","QueryTargetEmpty":"NULL","EscapeListX":"1","Protected":"true","EscapeHTML":"false","VariableDataType":"Any","Formatters":""},"ActionType":"Template-Variable","ChildActions":[]},{"Index":38,"Level":0,"Parameters":{"VariableType":"<Form>","QuerySource":"frmBaseName","QueryTarget":"@frmBaseName","QueryTargetLeft":"'","QueryTargetRight":"'","QueryTargetEmpty":"NULL","EscapeListX":"0","Protected":"true","EscapeHTML":"true","VariableDataType":"Any","Formatters":"[|COALESCE,Value,,{DECODEURI}]"},"ActionType":"Template-Variable","ChildActions":[]},{"Index":39,"Level":0,"Parameters":{"VariableType":"<Form>","QuerySource":"frmIsActive","QueryTarget":"@frmIsActive","QueryTargetLeft":"'","QueryTargetRight":"'","QueryTargetEmpty":"0","EscapeListX":"1","Protected":"true","EscapeHTML":"true","VariableDataType":"Boolean","Formatters":""},"ActionType":"Template-Variable","ChildActions":[]}]},{"Index":40,"Level":0,"Parameters":{"Name":"SAVE","Query":"BEGIN\ndeclare @systemmessage nvarchar(max)\nIF [UserID,System] = '-1' or [UserID,System] = NULL goto endsave\ndeclare @focusid int\nset @focusid = ISNULL((select SettingValue as focusarticleid from RSEUserSettings \n\t\twhere CreatedByUserID = [UserID,System] and PortalID = [PortalID,System] and Settingname = N'focusarticleid'),'-1')\n\tUPDATE [|@FocusDB,variable][RSEArticle]\n\t   SET \n\t\t[changeDateTime] = GETDATE()\n\t\t,[ipaddress] = '[Request.UserHostAddress,system]'\n\t\t,[IsActive] = @frmIsActive\n\t\t,[BaseName] = @frmBaseName\n\t\t,[BaseDescription] = @frmBaseDescription\n\t\t,[PortalID] = '[PortalID,System]'\n\t\t,[LastUserID] = '[UserID,System]'\n\t WHERE [DS_ID] = @focusid\n\nset @systemmessage = 'Article \"'+@frmBaseName+'\" saved.'\nselect @systemmessage as systemmessage, @focusid as focusid\nendsave:\nEND","IsProcess":"false","Connection":"","CacheName":"","CacheTime":"","CacheShared":"false"},"ActionType":"Action-Execute","ChildActions":[{"Index":41,"Level":0,"Parameters":{"Type":"Detail-NoQuery","GroupStatement":"","GroupIndex":"","Value":"<script language='javascript' type='text/javascript'>\n$(function() {\n\tmessagebox2('headermessageContainer','[systemmessage,SAVE]');\n\tif( $('#row[focusid,SAVE]').length ) {\n\t\tdocument.getElementById('row[focusid,SAVE]').getElementsByTagName('span')[0].innerHTML = [|@frmBaseName,variable];\n\t}\n    });\n</script>","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[]}]}]},{"Index":42,"Level":0,"Parameters":{"LeftCondition":"'[Action,Querystring]'","RightCondition":"'new'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-ElseIf","ChildActions":[{"Index":43,"Level":0,"Parameters":{"Name":"SAVE","Query":"declare @articleid int\nIF [UserID,System] = '-1' or [UserID,System] = NULL goto endsave\nINSERT INTO [|@FocusDB,variable][RSEArticle]\n(\n\tUserID,\n\tIPAddress,\n\tPortalID,\n\t[language]\n)\nVALUES(\n\t'[UserID,System]',\n\t'[Request.UserHostAddress,system]',\n\t'[PortalID,System]',\n\t'[MasterLanguage,QueryFocusID]'\n)\nset @articleid = @@Identity\n\n--UPDATE RSEshopUser set [focusarticleid] = @articleid where userid = [UserID,System]\nexecute [dbo].[RSEprocSetModuleSettings] @UserID='[UserID,System]', @PortalID='[PortalID,System]', @SettingName='FocusArticleID', @SettingValue=@articleid\nUPDATE [|@FocusDB,variable]RSEArticle set orderparentID = @articleid where ds_id = @articleid \nBEGIN\ndeclare @focusid int\nset @focusid = @articleid \n\tdelete from [|@FocusDB,variable]RSEArticleToModule where ModuleID = [ModuleID,System] and PortalID = '[PortalID,System]'\n\tinsert into [|@FocusDB,variable]RSEArticleToModule \n\t\t(UserID, ArticleID, ModuleID,IPAddress, PortalID)\n\t\tvalues([UserID,System], @focusid, '[ModuleID,System]','[Request.UserHostAddress,system]', '[PortalID,System]')\nendsave:\nEND\nSelect @articleid noteid","IsProcess":"false","Connection":"","CacheName":"","CacheTime":"","CacheShared":"false"},"ActionType":"Action-Execute","ChildActions":[]}]},{"Index":44,"Level":0,"Parameters":{"LeftCondition":"'[Action,Querystring]'","RightCondition":"'newtranslation'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-ElseIf","ChildActions":[{"Index":45,"Level":0,"Parameters":{"VariableType":"<QueryString>","VariableDataType":"Any","Formatters":"","QuerySource":"frmNewLanguage","QueryTarget":"@NewLanguage","QueryTargetLeft":"'","QueryTargetRight":"'","QueryTargetEmpty":"NULL","EscapeListX":"0","Protected":"true","EscapeHTML":"true"},"ActionType":"Template-Variable","ChildActions":[]},{"Index":46,"Level":0,"Parameters":{"Name":"SAVE","Query":"declare @ParentID int\ndeclare @ItemID int\nset @ItemID = [FocusArticleID,QueryFocusID]\ndeclare @returnmessage nvarchar(500)\nset @returnmessage = 'ein entsprechender Datensatz ist bereits vorhanden'\nset @ParentID = (select TOP 1 ParentID from [externDB,QueryFocusID]RSEArticle where [DS_ID] = @ItemID)\ndeclare @temptable table(SourceID int, IDspalte int identity(1,1))\n--\tif focus = master\n\tif @parentid = 0\n\t\tBEGIN\n\t\t\t--aktueller DS\n\t\t\tinsert into @temptable (SourceID) \n\t\t\t\tvalues(@ItemID)\t \n\n\t\t\tset @parentid = @ItemID\n\n\t\t\t--suche alle verbundenen Sprachen\n\t\t\tinsert into @temptable (SourceID)\n\t\t\t\t(select [DS_ID] from [externDB,QueryFocusID]RSEArticle \n\t\t\t\t\twhere [ParentID] = @ParentID\n\t\t\t\t\tand [DS_ID] not in (select SourceID from @temptable)\n\t\t\t\t\tand userDeleted = 0 and sysDeleted = 0\n\t\t\t\t\t)\n\t\tEND\n\tELSE\n\t\tBEGIN\n--\tif focus = slave\n\t\t\tinsert into @temptable (SourceID)\n\t\t\t\tvalues(@ParentID)\t \n\t\t\t\t\n\t\t\t--suche alle verbundenen Sprachen\n\t\t\tinsert into @temptable (SourceID)\n\t\t\t\t(select [DS_ID] from [externDB,QueryFocusID]RSEArticle \n\t\t\t\t\twhere [ParentID] = @ParentID\n\t\t\t\t\tand [DS_ID] not in (select SourceID from @temptable)\n\t\t\t\t\tand userDeleted = 0 and sysDeleted = 0\n\t\t\t\t\t)\n\t\tEND\n\t\t\t\n\nif @NewLanguage in (select language from [externDB,QueryFocusID]RSEArticle \n\t\t\t\t\twhere [DS_ID] in (select SourceID from @temptable) and language = @NewLanguage)\ngoto endsave\nELSE\n--\tneuer Datensatz\nBEGIN\n\tINSERT INTO [externDB,QueryFocusID]RSEArticle (UserID, IPAddress, PortalID, ParentID,language) \n\tValues ('[UserID,System]','[Request.UserHostAddress,system]','[PortalID,System]',@ParentID ,@NewLanguage)\n\nSelect @@Identity as noteid,@@Identity as FocusArticleID\nexecute [dbo].[RSEprocSetModuleSettings] @UserID='[UserID,System]', @PortalID='[PortalID,System]', @SettingName='FocusArticleID', @SettingValue=@@Identity\n--UPDATE RSEshopUser set [focusarticleid] = @@Identity where userid = [UserID,System]\nUPDATE [externDB,QueryFocusID]RSEArticle set orderparentID = @@Identity where [DS_ID] = @@Identity \nEND\n--set @returnmessage = 'eine Übersetzung in der Sprache' +@NewLanguage +' wurde engelegt.'\n\nendsave:\n--select @returnmessage as returnmessage","IsProcess":"false","Connection":"","CacheName":"","CacheTime":"","CacheShared":"false"},"ActionType":"Action-Execute","ChildActions":[]}]},{"Index":47,"Level":0,"Parameters":{"LeftCondition":"'[Action,Querystring]'","RightCondition":"'edit'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-ElseIf","ChildActions":[{"Index":48,"Level":0,"Parameters":{"Type":"Query-Query","GroupStatement":"","GroupIndex":"","Value":"declare @ParentID int\ndeclare @articleID int\nset @articleID = '[FocusArticleID,QueryFocusID]'\nset @ParentID = (select TOP 1 ParentID \n\t\tfrom [externDB,QueryFocusID]RSEArticle \n\t\twhere [DS_ID] = @articleID and  PortalID = '[PortalID,System]' and userDeleted = 0 and sysDeleted = 0)\n\nif 1 = (select case when @articleID in (\n\t\tselect DS_ID from [externDB,QueryFocusID]RSEArticle \n\t\twhere PortalID = [PortalID,System] and userDeleted = 0 and sysDeleted = 0) \n\tthen 1 else 0 end)\n\tBEGIN\n\t\tset @articleID = '[FocusArticleID,QueryFocusID]'\n\tEND\nelse \n\tBEGIN\t\n\t\tset @articleID = @ParentID\n\tEND\n\n\nSELECT *\n  FROM [externDB,QueryFocusID][RSEArticle]\nwhere DS_ID = @articleID","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[{"Index":49,"Level":0,"Parameters":{"Type":"Detail-Detail","GroupStatement":"","GroupIndex":"","Value":"[menuCancel,action]\n[messageContainer,a]\n<ul class=\"nav nav-tabs\" id=\"myTab[ModuleID,System]\">\n  <li class=\"active\"><a lang=\"en\" href=\"#article[ModuleID,System]\" data-toggle=\"tab\">[[template,q],QueryFocusID]</a></li>\n  <li><a lang=\"en\" href=\"#translation[ModuleID,System]\" data-toggle=\"tab\">new translation</a></li>\n</ul>\n\n<div class=\"tab-content\">\n  <div class=\"tab-pane active\" id=\"article[ModuleID,System]\">[articletemplateedit,action]</div>\n  <div class=\"tab-pane\" id=\"translation[ModuleID,System]\">[NewLanguage,action]</div>\n</div>\n\n<script>\n  $(function () {\n    $('#myTab[ModuleID,System] a:first').tab('show')\n  })\n</script>\n[RunEditor,A]","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[]}]}]},{"Index":50,"Level":0,"Parameters":{"LeftCondition":"'[Action,Querystring]'","RightCondition":"'render'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-ElseIf","ChildActions":[{"Index":51,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"RenderList","Value":"render","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]}]},{"Index":52,"Level":0,"Parameters":{},"ActionType":"Condition-Else","ChildActions":[{"Index":53,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"RenderList","Value":"render","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]}]},{"Index":54,"Level":0,"Parameters":{"Value":"Hier wird die Liste dargestellt"},"ActionType":"Action-Comment","ChildActions":[]},{"Index":55,"Level":0,"Parameters":{"LeftCondition":"'[RenderList,Action]'","RightCondition":"'render'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-If","ChildActions":[{"Index":56,"Level":0,"Parameters":{"Type":"Query-Query","GroupStatement":"","GroupIndex":"","Value":"SELECT *, ROW_NUMBER() OVER (order by BaseName ) as RowNumber\n  FROM [|@FocusDB,variable][RSEArticle]\n  WHERE [PortalID] = [PortalID,System] and userDeleted = 0 and sysDeleted = 0 --and language = '[locale,system]'","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[{"Index":57,"Level":0,"Parameters":{"Type":"Group-Header","GroupStatement":"NewEntry","GroupIndex":"","Value":"<div id=\"templateTopPane[ModuleID,System]\" class=\"templateTopPane\">\n</div>\n<div id=\"templateContentPane\" class=\"editBoxStyle\">\n  <div class=\"list-content\">\n      <table class=\"table table-hover table-striped\">\n        <thead>\n          <tr>\n            <th>#</th>\n            <th lang=\"en\">[[template,q],QueryFocusID]</th>\n\t\t\t<th><button lang=\"en\" type=\"button\" class=\"btn btn-primary right\" value=\"new\" name=\"new\" id=\"new\" language=\"javascript\"\n\t\t\tonclick=\"ows.Fetch('[ModuleID,System]',-1,'Action=new&template=[template,q]','0', function(){ows.Fetch('[ModuleID,System]',-1,'Action=edit&template=[template,q]','templateTopPane[ModuleID,System]');});$('#templateTopPane[ModuleID,System]').addClass('editBoxStyle');goToByScroll2('templateTopPane[ModuleID,System]', 100);\">new</button></th>\n          </tr>\n        </thead>\n        <tbody>","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[]},{"Index":58,"Level":0,"Parameters":{"Type":"Detail-Detail","GroupStatement":"","GroupIndex":"","Value":"[articletemplatelist,action]","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[]},{"Index":59,"Level":0,"Parameters":{"Type":"Group-Footer","GroupStatement":"","GroupIndex":"","Value":"        </tbody>\n      </table>\n    </div>\n</div>","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[]}]},{"Index":60,"Level":0,"Parameters":{"Type":"Detail-NoResults","GroupStatement":"","GroupIndex":"","Value":"<div id=\"templateTopPane[ModuleID,System]\" class=\"templateTopPane\">\n</div>\n<div id=\"templateContentPane\" class=\"editBoxStyle\">\n  <div class=\"list-content\">\n      <table class=\"table table-hover table-striped\">\n        <thead>\n          <tr>\n            <th>#</th>\n            <th lang=\"en\">article</th>\n\t\t\t<th><button lang=\"en\" type=\"button\" class=\"btn btn-primary right\" value=\"new\" name=\"new\" id=\"new\" language=\"javascript\"\n\t\t\tonclick=\"ows.Fetch('[ModuleID,System]',-1,'Action=new&template=[template,q]','0', function(){ows.Fetch('[ModuleID,System]',-1,'Action=edit&template=[template,q]','templateTopPane[ModuleID,System]');});$('#templateTopPane[ModuleID,System]').addClass('editBoxStyle');goToByScroll2('templateTopPane[ModuleID,System]', 100);\">new</button></th>\n          </tr>\n        </thead>\n        <tbody>\n\n <tr id=\"row[ds_id]\">\n            <td class=\"col-xs-1\"></td>\n            <td class=\"hover_style col-xs-9\" onclick=\"ows.Fetch('[ModuleID,System]',-1,'Action=new&template=[template,q]','0', function(){ows.Fetch('[ModuleID,System]',-1,'Action=edit&template=[template,q]','templateTopPane[ModuleID,System]');});$('#templateTopPane[ModuleID,System]').addClass('editBoxStyle');goToByScroll2('templateTopPane[ModuleID,System]', 100);\"><span lang=\"en\">no data available...click to add...</span></td>\n\t    <td class=\"col-xs-2\"></td>\n          </tr>\n\n        </tbody>\n      </table>\n    </div>\n</div>","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[]}]}]},{"Index":61,"Level":0,"Parameters":{},"ActionType":"Condition-Else","ChildActions":[{"Index":62,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"articletemplatebasic","Value":"[BaseDescription]","SkipProcessing":"true","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":63,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"SelectArticleToModule","Value":"<div class=\"row\">\n\t<div class=\"form-group col-md-6\">\n\t<select name=\"frmArticleToModule[ModuleID,System]\" ID=\"frmArticleToModule[ModuleID,System]\" class=\"form-control\">\n\t<option lang=\"en\" value='0' selected=\"selected\">choose article...</option>\n\t{SUBQUERY,\n\t\tName=\"qryNewHtml\",\n\t\tQuery=\"exec [externDB,QueryFocusID][RSEprocGetArticle]  @UserID=[UserID,System], @PortalID=[PortalID,System], @ModuleID=[ModuleID,System]\",\n\t\tNoResultFormat=\"<p><span lang=\"de\" >keine weitere Auswahl vorhanden</span></p>\",\n\t\tFormat=\"<option lang=\\\"en\\\" value='\\[EntryID\\]' onclick=\\\"ows.Fetch('\\[ModuleID,System\\]',0,'Action=save&frmArticle=\\[EntryID\\]');goToByScroll2('articlepane[ModuleID,System]', 100);\\\" >\\[Text\\]</option>\",\n\t\tSelectedFormat=\"<option value='\\[EntryID\\]' selected=\"selected\">\\[Text\\]</option>\",\n\t\tSelectedField=\"EntryID\",\n\t\tUseCache=\"false\"}\n\t</select>\n\t</div>\n</div>","SkipProcessing":"true","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]},{"Index":64,"Level":0,"Parameters":{"LeftCondition":"'[Action,Querystring]'","RightCondition":"'render'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-If","ChildActions":[{"Index":65,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"RenderList","Value":"render","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]}]},{"Index":66,"Level":0,"Parameters":{"LeftCondition":"'[Action,Querystring]'","RightCondition":"'save'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-ElseIf","ChildActions":[{"Index":67,"Level":0,"Parameters":{"VariableType":"<QueryString>","VariableDataType":"Any","Formatters":"","QuerySource":"frmArticle","QueryTarget":"@frmArticle","QueryTargetLeft":"'","QueryTargetRight":"'","QueryTargetEmpty":"NULL","EscapeListX":"0","Protected":"true","EscapeHTML":"true"},"ActionType":"Template-Variable","ChildActions":[]},{"Index":68,"Level":0,"Parameters":{"Name":"SAVE","Query":"BEGIN\ndeclare @focusid int\nset @focusid = @frmArticle\n\tdelete from [|@FocusDB,variable]RSEArticleToModule where ModuleID = [ModuleID,System] \n\tinsert into [|@FocusDB,variable]RSEArticleToModule \n\t\t(UserID, ArticleID, ModuleID,IPAddress, PortalID)\n\t\tvalues([UserID,System], @focusid, [ModuleID,System],'[Request.UserHostAddress,system]', '[PortalID,System]')\nendsave:\nEND","IsProcess":"false","Connection":"","CacheName":"","CacheTime":"","CacheShared":"false"},"ActionType":"Action-Execute","ChildActions":[]},{"Index":69,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"RenderList","Value":"render","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]}]},{"Index":70,"Level":0,"Parameters":{"LeftCondition":"'[Action,Querystring]'","RightCondition":"'delete'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-ElseIf","ChildActions":[{"Index":71,"Level":0,"Parameters":{"VariableType":"<QueryString>","VariableDataType":"Any","Formatters":"","QuerySource":"frmArticle","QueryTarget":"@frmArticle","QueryTargetLeft":"'","QueryTargetRight":"'","QueryTargetEmpty":"NULL","EscapeListX":"0","Protected":"true","EscapeHTML":"true"},"ActionType":"Template-Variable","ChildActions":[]},{"Index":72,"Level":0,"Parameters":{"Name":"SAVE","Query":"BEGIN\n\tdelete from [|@FocusDB,variable]RSEArticleToModule where ModuleID = [ModuleID,System] and PortalID = [PortalID,System]\nEND","IsProcess":"false","Connection":"","CacheName":"","CacheTime":"","CacheShared":"false"},"ActionType":"Action-Execute","ChildActions":[]},{"Index":73,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"RenderList","Value":"render","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]}]},{"Index":74,"Level":0,"Parameters":{"LeftCondition":"'[Action,Querystring]'","RightCondition":"'articletomodule'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-ElseIf","ChildActions":[{"Index":75,"Level":0,"Parameters":{"Type":"Detail-NoQuery","GroupStatement":"","GroupIndex":"","Value":"[SelectArticleToModule,action]","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[]}]},{"Index":76,"Level":0,"Parameters":{"LeftCondition":"'[Action,Querystring]'","RightCondition":"'ignore'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-ElseIf","ChildActions":[{"Index":77,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"RenderList","Value":"render","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]}]},{"Index":78,"Level":0,"Parameters":{},"ActionType":"Condition-Else","ChildActions":[{"Index":79,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"RenderList","Value":"render","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]}]},{"Index":80,"Level":0,"Parameters":{"LeftCondition":"'[RenderList,Action]'","RightCondition":"'render'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-If","ChildActions":[{"Index":81,"Level":0,"Parameters":{"LeftCondition":"[@SecAdmin,Variable]","RightCondition":"'1'","Operator":"=","IsAdvanced":"False"},"ActionType":"Condition-If","ChildActions":[{"Index":82,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"menu","Value":"<div id=\"messagebox[ModuleID,System]\" class=\"\">&nbsp;</div>\n<div id=\"templateTopPane[ModuleID,System]\" class=\"templateTopPane\">&nbsp;</div>\n<div class=\"form-group col-md-6 col-xs-6 fullwidth right\">\n\t<div class=\"input-group\">\n\t\t<div class=\"clearfix\">&nbsp;</div>\n\t\t<div class=\"input-group-btn\">\n\t\t\t<button type=\"button\" class=\"btn btn-default btn-sm dropdown-toggle\" data-toggle=\"dropdown\"><span class=\"glyphicon rotate glyphicon-th-list\"></span></button>\n\t\t\t<ul class=\"dropdown-menu pull-right\">\n\t\t\t\t<li><a lang=\"en\" onclick=\"ows.Fetch('[ModuleID,System]',-1,'Action=articletomodule','articlepane[ModuleID,System]');\">choose article</a></li>\n\t\t\t\t<li><a lang=\"en\" onclick=\"ows.Fetch('[ModuleID,System]',-1,'Action=delete');\">clear selection</a></li>\n\t\t\t\t<li role=\"presentation\" class=\"divider\"></li>\n\t\t\t\t<li><a lang=\"en\" onclick=\"ows.Fetch('[ModuleID,System]',-1,'Action=edit&template=editarticle&noteid=[DS_ID]&menu=ext','templateTopPane[ModuleID,System]',function(){goToByScroll2('templateTopPane[ModuleID,System]', 100);});styleEditBox('templateTopPane[ModuleID,System]');\">edit</a></li>\n\t\t\t\t<li><a lang=\"en\" onclick=\"ows.Fetch('[ModuleID,System]',-1,'Action=new&template=editarticle','templateTopPane[ModuleID,System]', function(){ows.Fetch('[ModuleID,System]',-1,'Action=edit&template=editarticle&menu=ext','templateTopPane[ModuleID,System]');});styleEditBox('templateTopPane[ModuleID,System]');goToByScroll2('templateTopPane[ModuleID,System]', 100);\">new</a></li>\n<li role=\"presentation\" class=\"divider\"></li>\n<li><a lang=\"en\" onclick=\"ows.Fetch('[ModuleID,System]',-1,'Action=render&template=editarticle','templateTopPane[ModuleID,System]',function(){goToByScroll2('templateTopPane[ModuleID,System]', 100);});\">list</a></li>\n\t\t\t\t<li role=\"presentation\" class=\"divider\"></li>\n\t\t\t\t<li><a lang=\"en\" onclick=\"ows.Fetch('[ModuleID,System]',-1,'Action=render');\">cancel</a></li>\n\t\t\t</ul>\n\t\t</div>\n\t</div>\n</div>","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]}]},{"Index":83,"Level":0,"Parameters":{},"ActionType":"Condition-Else","ChildActions":[{"Index":84,"Level":0,"Parameters":{"Type":"&lt;Action&gt;","Name":"menu","Value":"","SkipProcessing":"false","AssignmentType":"0"},"ActionType":"Action-Assignment","ChildActions":[]}]},{"Index":85,"Level":0,"Parameters":{"Type":"Query-Query","GroupStatement":"","GroupIndex":"","Value":"declare @articleid int\ndeclare @childid int\nset @articleid = (select ArticleID FROM [|@FocusDB,variable][RSEArticleToModule] where ModuleID = '[ModuleID,System]')\nset @childid = (select DS_ID  FROM [|@FocusDB,variable][RSEArticle]\n  \t\twhere (DS_ID = @articleid or ParentID = @articleid) and language = '[locale,system]' and userDeleted = 0 and sysDeleted = 0 )\n\n\nif @childid > 0\nBEGIN\n\t  select *  FROM [|@FocusDB,variable][RSEArticle] where DS_ID = @childid\n\t  --goto endsave\nEND\nelse\nBEGIN\n\t--select *  FROM [|@FocusDB,variable][RSEArticle] \n\t--where (DS_ID = @articleid or ParentID = @articleid) and userDeleted = 0 and sysDeleted = 0 \n\tselect *  FROM [|@FocusDB,variable][RSEArticle] where DS_ID = @articleid and userDeleted = 0 and sysDeleted = 0\nEND","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[{"Index":86,"Level":0,"Parameters":{"Type":"Group-Header","GroupStatement":"","GroupIndex":"1","Value":"[menu,a]\n<div id=\"articlepane[ModuleID,System]\" class=\"tab-pane Normal\">","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[]},{"Index":87,"Level":0,"Parameters":{"Type":"Detail-Detail","GroupStatement":"","GroupIndex":"","Value":"[articletemplatebasic,action]","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[]},{"Index":88,"Level":0,"Parameters":{"Type":"Group-Footer","GroupStatement":"","GroupIndex":"","Value":"</div>\n<script>\n$(document).ready(function () {\n\tif($('#dnn_ctr'+[ModuleID,System]+'_dnnTITLE_titleLabel').length > 0){\n\t\tdocument.getElementById('dnn_ctr'+[ModuleID,System]+'_dnnTITLE_titleLabel').innerHTML='[BaseName]';\n\t}\n})\n</script>","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[]},{"Index":89,"Level":0,"Parameters":{"Type":"Detail-NoResults","GroupStatement":"","GroupIndex":"","Value":"[menu,a]\n<div id=\"articlepane[ModuleID,System]\" class=\"tab-pane\">\n<h1>keine Daten vorhanden...</h1>\n<p>Es wurde entweder noch kein Artikel zur Ansicht ausgew&auml;hlt oder es existiert noch keine &Uuml;bersetzung.<br/>\nBitte w&auml;hle einen Artikel &uuml;ber das Men&uuml; aus. Dafür m&uuml;&szlig;t du &uuml;ber ausreichende Berechtigung verf&uuml;gen.</p>\n</div>","Connection":"","Filter":"","CacheTime":"","CacheName":"","CacheShared":"false"},"ActionType":"Template","ChildActions":[]}]}]}]}]}],"recordsPerPage":"10","enableAlphaFilter":"false","enablePageSelection":"false","enableRecordsPerPage":"false","enableCustomPaging":"false","enableExcelExport":false,"enableHide_OnNoQuery":false,"enableHide_OnNoResults":false,"enableAdvancedParsing":true,"enableCompoundIIFConditions":"true","enableQueryDebug":"false","enableQueryDebug_Edit":"false","enableQueryDebug_Admin":"false","enableQueryDebug_Super":"true","enableQueryDebug_Log":false,"enableQueryDebug_ErrorLog":false,"autoRefreshInterval":"","skipRedirectActions":"false","skipSubqueryDebugging":"false","enableAdmin_Edit":true,"enableAdmin_Admin":false,"enableAdmin_Super":false,"BotRecordCount":0,"BotPageVariableName":null,"enableBotShowAllRecords":false,"enableBotDetection":false,"BotNonAjaxText":null,"disableOpenScript":false,"enableSilverlight":false,"enableAJAX":"false","enableAJAXPaging":"true","enableAJAXCustomPaging":"false","enableAJAXCustomStatus":"false","enableAJAXPageHistory":"false","customAJAXPageHistory":"","enableAJAXManual":"false","includeJavascriptUtilities":"false","includeJavascriptValidation":"false","javascriptInclude":[],"javascriptOnComplete":"","enableMultipleColumnSorting":"false","ModuleCommunicationMessageType":"","showAll":"true","useExplicitSystemVariables":"true","enabledForcedQuerySplit":"false","query":"","filter":"","customConnection":"","listItem":"","listAItem":"","defaultItem":"","noqueryItem":"","SearchQuery":"","SearchTitle":"","SearchLink":"","SearchAuthor":"","SearchDate":"","SearchKey":"","SearchContent":"","SearchDescription":"","Header":null,"Footer":null,"Title":null,"Version":"20","noOWSCreate":"false"}